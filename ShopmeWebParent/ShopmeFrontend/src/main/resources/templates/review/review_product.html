<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <div th:replace="~{fragments :: page_head('Reviews', 'tag')}">...</div>
    <link th:href="@{/star-rating/css/star-rating.css}" media="all" rel="stylesheet" type="text/css" />
    <script th:src="@{/star-rating/js/star-rating.js}" type="text/javascript"></script>
    <link th:href="@{/star-rating/themes/krajee-svg/theme.css}" media="all" rel="stylesheet" type="text/css" />
    <script th:src="@{/star-rating/themes/krajee-svg/theme.js}"></script>
</head>

<body  class="d-flex flex-column min-vh-100">
<div class="container-fluid d-flex flex-column flex-grow-1">
    <div th:replace="~{navigation :: header_menu}">...</div>
    <div th:replace="~{navigation :: quick_links}">...</div>


    <main class="flex-fill">
        <div class="row">
            <div class="col-auto">
                <img th:src="${product.mainImagePath}" th:alt="${product.name}" style="width: 100px"/>
            </div>
            <div class="col-auto">
                <h5>[[${product.name}]]</h5>
                <div class="row">
                    <div class="ml-2">
                        <div class="col-xs">
                            <input type="text" class="product-detail-rating-star" dir="ltr" data-size="md" th:value="${product.averageRating}">
                        </div>
                    </div>
                    <div class="col-xs ml-1 mt-3 text-muted">
                        <span th:replace="~{fragments :: format_number(${product.averageRating})}"></span> of 5
                    </div>
                </div>
                <div class="text-muted">
                    <span>[[${product.reviewCount}]]</span> ratings
                </div>
            </div>
        </div>
        <th:block th:each="review : ${listReviews}">
            <div class="ml-4 my-4">
                <div class="row">
                    <div class="ml-2">
                        <div class="col-xs">
                            <input type="text" class="product-detail-rating-star" dir="ltr" data-size="xs" th:value="${review.rating}">
                        </div>
                    </div>
                </div>
                <div class="row ml-3">
                    <b>[[${review.headline}]]</b>
                </div>
                <div class="row ml-3">
                    [[${review.comment}]]
                </div>
                <div class="ml-5">
                    <small>
                        <span>[[${review.customer.fullName}]]</span>&nbsp;<span th:replace="~{fragments :: format_time(${review.reviewTime}, 'yyyy-MM-dd HH:mm:ss')}"></span>
                    </small>
                </div>
            </div>
        </th:block>
    </main>


    <div th:replace="~{fragments :: pagination('/ratings/' + ${product.alias} ,'review')}"></div>


    <div th:replace="~{navigation :: footer_menu}"></div>
</div>
</body>
<script type="text/javascript">
    let moduleURL = "[[@{/reviews}]]"
    let contextPath = "[[@{/}]]";
    let csrfHeaderName = "[[${_csrf.headerName}]]";
    let csrfValue = "[[${_csrf.token}]]";

      $(".product-detail-rating-star").rating({
            displayOnly: true,
            hoverOnClear: false,
            showCaption: false,
            theme: 'krajee-svg'
      })



</script>
</html>